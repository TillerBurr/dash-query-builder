"use strict";(self.webpackChunkdash_query_builder=self.webpackChunkdash_query_builder||[]).push([[679],{91587:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(40295),o=r.n(n),i=r(63250),a=r(38552),c=r(85111),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},l=i.Aq.loadTree,s=i.Aq.checkTree,f=i.Aq.getTree;const m=function(e){for(var t=e.id,r=e.tree,m=e.loadFormat,d=e.fields,g=e.config,v=e.setProps,p=e.spelFormat,b=e.jsonLogicFormat,q=e.alwaysShowActionButtons,y=e.styleConfig,F=(0,n.useRef)(null),h=(0,n.useRef)(!0),A={settings:void 0,operators:void 0,widgets:void 0,conjunctions:void 0,types:void 0,fields:void 0,ctx:{utils:void 0,W:void 0,O:void 0,components:void 0}},j=0,E=Object.entries(y);j<E.length;j++){var T=E[j],w=T[0],O=T[1];if(g&&void 0!==g[w]){var k=g[w];A[w]=(0,a.Um7)([O,k])}else A[w]=O;g&&delete g[w]}A=(0,a.Um7)([A,g]);var C=u(u({},A),{fields:d}),S=e[m]||c.in,x=(0,c.xe)(m,S,C),B=(0,n.useState)({immutableTree:x,config:C}),L=B[0],_=B[1];(0,n.useEffect)((function(){if(F.current!==r){var e=l(r),t={sqlFormat:i.Aq.sqlFormat(e,L.config),tree:r,jsonLogicFormat:i.Aq.jsonLogicFormat(e,L.config).logic,mongoDBFormat:i.Aq.mongodbFormat(e,L.config),queryString:i.Aq.queryString(e,L.config),elasticSearchFormat:i.Aq.elasticSearchFormat(e,L.config),spelFormat:i.Aq.spelFormat(e,L.config),queryBuilderFormat:i.Aq.queryBuilderFormat(e,L.config)};_((function(t){return u(u({},t),{immutableTree:e})})),v(u({},t)),F.current=r}}),[r]),(0,n.useEffect)((function(){if("spelFormat"===m&&void 0!==p){var e=(0,c.xe)("spelFormat",p,L.config);_((function(t){return u(u({},t),{immutableTree:e})})),v({tree:f(e)})}}),[p]),(0,n.useEffect)((function(){if("jsonLogicFormat"===m&&void 0!==b){var e=(0,c.xe)("jsonLogicFormat",b,L.config);_((function(t){return u(u({},t),{immutableTree:e})})),v({tree:f(e)})}}),[b]),(0,n.useEffect)((function(){if(h.current)h.current=!1;else{v({tree:c.in});var e=u(u({},L.config),{fields:d});_((function(t){return u(u({},t),{immutableTree:c.wE,config:e})}))}}),[d]);var P=(0,n.useCallback)((function(e,t){_((function(r){return u(u({},r),{immutableTree:e,config:t})}));var r=f(s(e,t));v({tree:r})}),[]),N=(0,n.useCallback)((function(e){return o().createElement("div",{className:"query-builder-container",style:{padding:"10px"}},o().createElement("div",{className:"query-builder "+(q?"":"qb-lite")},o().createElement(i.M$,u({},e))))}),[q]);return o().createElement("div",{id:t},o().createElement(i.XK,u({},L.config,{value:L.immutableTree,onChange:P,renderBuilder:N})))}},65972:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(91587),o=r(40295),i=r.n(o),a=r(63250),c=(r(86368),function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)});const u=function(e){return i().createElement(n.A,c({},e,{styleConfig:a.d$}))}}}]);